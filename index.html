<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>VietQR Tool Pro</title>

<style>
body{
    font-family: Arial;
    background: radial-gradient(circle,#0b1220,#000000);
    color:white;
    text-align:center;
    min-height:100vh;
}

/* Title */
h2{
    margin-top:40px;
    font-size:26px;
    letter-spacing:1px;
}

/* Card */
.container{
    width:520px;
    margin:20px auto;
    background:#121826;
    padding:22px;
    border-radius:15px;
    box-shadow:0px 0px 25px rgba(0,255,255,.2);
    border:1px solid #1f2b44;
}

/* input */
input,select{
    width:100%;
    padding:9px;
    margin:6px 0;
    border-radius:6px;
    border:1px solid #2e3b56;
    background:#0d141f;
    color:white;
}

/* button */
button{
    padding:10px 15px;
    border-radius:6px;
    border:none;
    cursor:pointer;
    margin-top:10px;
    background:#00b7ff;
    color:white;
    font-weight:bold;
    transition:0.2s;
}
button:hover{
    transform:scale(1.05);
    background:#07e0ff;
}

/* Admin box */
#adminBox{
    display:none;
    margin-top:10px;
    padding:10px;
    background:#0f1a2b;
    border-radius:8px;
    border:1px solid #26344f;
}

/* Secret */
#secretBtn{
    position:absolute;
    top:15px;
    right:15px;
    width:26px;
    height:26px;
    background:white;
    border-radius:4px;
    cursor:pointer;
}

/* QR */
img{
    margin-top:15px;
    border-radius:10px;
    width:420px;
}

label{
    display:block;
    margin-top:6px;
    cursor:pointer;
}
</style>
</head>
<body>

<div id="secretBtn" onclick="enterPass()"></div>

<h2>üöÄ VietQR Generator ‚Äî Premium UI</h2>

<div class="container">

<select id="bank" disabled></select>
<input id="account" disabled value="054601092000">

<input id="amount" placeholder="S·ªë ti·ªÅn (vd 300000)">
<input id="info" placeholder="N·ªôi dung" value="NAP NET">
<input id="name" placeholder="T√™n th·ª• h∆∞·ªüng" value="HUYNH CHANH THUAT">

<label><input type="checkbox" id="randCode"> T·ª± t·∫°o n·ªôi dung d·∫°ng THXXXXX</label>
<label><input type="checkbox" id="hideAmount"> ·∫®n s·ªë ti·ªÅn</label>
<label><input type="checkbox" id="hideAccount"> ·∫®n s·ªë t√†i kho·∫£n</label>
<label><input type="checkbox" id="hideInfo"> ·∫®n n·ªôi dung</label>

<button onclick="createQR()">T·∫°o m√£ QR</button>

<div id="result"></div>

<div id="adminBox">
    <h3>Admin Settings</h3>
    <p>B·∫≠t ch·ªânh Bank & STK</p>
    <button onclick="hideAdmin()">·∫®n Admin</button>
</div>

</div>

<script>

const passKey = "0546112";

/* ---------- ADMIN PASS ---------- */
function enterPass(){
    let p = prompt("Nh·∫≠p m·∫≠t kh·∫©u:");
    let bank = document.getElementById("bank");
    let acc = document.getElementById("account");
    let admin = document.getElementById("adminBox");

    if(p === passKey){
        alert("ƒê√∫ng m·∫≠t kh·∫©u! ƒê√£ m·ªü kh√≥a ch·ªânh Bank + STK");
        bank.disabled = false;
        acc.disabled = false;
        admin.style.display = "block";
    }else{
        alert("Sai m·∫≠t kh·∫©u!");
        bank.disabled = true;
        acc.disabled = true;
        admin.style.display = "none";
    }
}

function hideAdmin(){
    document.getElementById("adminBox").style.display="none";
}

/* ---------- LOAD BANK LIST ---------- */
async function loadBanks(){
    try{
        let res = await fetch("https://api.vietqr.io/v2/banks");
        let js = await res.json();
        let bankSelect = document.getElementById("bank");

        js.data.forEach(b=>{
            let op = document.createElement("option");
            op.value = b.bin;
            op.text = b.short_name + " - " + b.name;
            bankSelect.appendChild(op);
        });

        bankSelect.value = "970403";
    }catch(e){
        console.log("Load bank fail");
    }
}
loadBanks();

/* ---------- RANDOM TH CODE ---------- */
function randomTH(){
    let chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
    let out = "";
    for(let i=0;i<5;i++) out += chars[Math.floor(Math.random()*chars.length)];
    return "TH" + out;
}

/* ---------- CREATE QR ---------- */
function createQR(){
    let bank = bankSelect.value;
    let acc = account.value.trim();
    let money = amount.value.trim();
    let info = infoInput.value.trim();
    let name = nameInput.value.trim();

    let hideAmount = hideAmountChk.checked;
    let hideAccount = hideAccountChk.checked;
    let hideInfo = hideInfoChk.checked;
    let rand = randChk.checked;

    if(rand) info = randomTH();
    if(hideAmount) money = "";
    if(hideAccount) acc = "";
    if(hideInfo) info = "";

    if(acc === "" && money === ""){
        alert("Kh√¥ng th·ªÉ b·ªè c·∫£ STK v√† s·ªë ti·ªÅn!");
        return;
    }

    let fileType = (hideAmount || hideAccount || hideInfo) ? "compact.png" : "print.png";

    let url = `https://img.vietqr.io/image/${bank}-${acc}-${fileType}?accountName=${encodeURIComponent(name)}`;
    if(money) url += `&amount=${money}`;
    if(info) url += `&addInfo=${encodeURIComponent(info)}`;

    result.innerHTML =
    `<img src="${url}">
     <br>
     <a href="${url}" download="vietqr.png">
         <button>T·∫£i ·∫£nh</button>
     </a>`;
}
</script>

</body>
</html>
