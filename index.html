<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>VietQR Tool</title>

<style>
body{
    font-family: Arial;
    background:#111;
    color:white;
    text-align:center;
    position: relative;
    min-height: 100vh;
}
.container{
    width:450px;
    margin:50px auto;
    background:#1c1c1c;
    padding:15px;
    border-radius:10px;
}
input,select{
    width:100%;
    padding:8px;
    margin:5px 0;
    border-radius:6px;
    border:none;
}
button{
    padding:8px 12px;
    border-radius:6px;
    border:none;
    cursor:pointer;
    margin-top:5px;
}
#adminBox{
    display:none;
    margin-top:10px;
    padding:10px;
    background:#222;
    border-radius:8px;
}
#secretBtn{
    position:absolute;
    top:15px;
    right:15px;
    width:20px;
    height:20px;
    background:white;
    border-radius:4px;
    cursor:pointer;
}
img{
    margin-top:10px;
    border-radius:10px;
}
label{
    display:block;
    margin-top:5px;
}
</style>

</head>
<body>

<!-- N√∫t b√≠ m·∫≠t nh·∫≠p pass -->
<div id="secretBtn" onclick="enterPass()"></div>

<h2>üöÄ VietQR Generator</h2>

<div class="container">

<select id="bank" disabled></select>
<input id="account" disabled placeholder="S·ªë t√†i kho·∫£n" value="054601092000">

<input id="amount" placeholder="S·ªë ti·ªÅn (vd 300000)">
<input id="info" placeholder="N·ªôi dung" value="NAP NET">
<input id="name" placeholder="T√™n th·ª• h∆∞·ªüng" value="HUYNH CHANH THUAT">

<label><input type="checkbox" id="hideAmount"> ·∫®n s·ªë ti·ªÅn</label>
<label><input type="checkbox" id="hideAccount"> ·∫®n s·ªë t√†i kho·∫£n</label>

<button onclick="createQR()">T·∫°o m√£</button>

<div id="result"></div>

<div id="adminBox">
    <h3>Admin Settings</h3>
    <p>B·∫≠t ch·ªânh Bank + STK</p>
    <button onclick="hideAdmin()">·∫®n Admin</button>
</div>

</div>

<script>
const passKey = "123456"; // Pass admin ‚Äî KH√îNG l∆∞u ƒë√¢u c·∫£

// Khi nh·∫•n n√∫t b√≠ m·∫≠t
function enterPass(){
    let p = prompt("Nh·∫≠p m·∫≠t kh·∫©u:");

    if(p === passKey){
        alert("ƒê√∫ng m·∫≠t kh·∫©u! B·∫°n c√≥ th·ªÉ ch·ªânh Bank & STK");
        document.getElementById("bank").disabled = false;
        document.getElementById("account").disabled = false;
        document.getElementById("adminBox").style.display="block";
    }else{
        alert("Sai m·∫≠t kh·∫©u!");
        document.getElementById("bank").disabled = true;
        document.getElementById("account").disabled = true;
        document.getElementById("adminBox").style.display="none";
    }
}

function hideAdmin(){
    document.getElementById("adminBox").style.display="none";
}

// Load danh s√°ch ng√¢n h√†ng t·ª´ VietQR
async function loadBanks(){
    try{
        let res = await fetch("https://api.vietqr.io/v2/banks");
        let js = await res.json();
        let select = document.getElementById("bank");
        js.data.forEach(b=>{
            let op = document.createElement("option");
            op.value = b.bin;
            op.text = b.short_name + " - " + b.name;
            select.appendChild(op);
        });
        select.value = "970403"; // Sacombank m·∫∑c ƒë·ªãnh
    }catch(err){
        console.error("Kh√¥ng t·∫£i ƒë∆∞·ª£c danh s√°ch ng√¢n h√†ng:", err);
    }
}
loadBanks();

// T·∫°o QR
function createQR(){
    let bank = document.getElementById("bank").value;
    let acc = document.getElementById("account").value;
    let money = document.getElementById("amount").value.trim();
    let info = document.getElementById("info").value;
    let name = document.getElementById("name").value;

    let hideAmount = document.getElementById("hideAmount").checked;
    let hideAccount = document.getElementById("hideAccount").checked;

    if(hideAccount) acc = "";
    if(hideAmount) money = "";

    let url = `https://img.vietqr.io/image/${bank}-${acc}-print.png?addInfo=${encodeURIComponent(info)}&accountName=${encodeURIComponent(name)}`;
    if(money !== "") url += `&amount=${money}`;

    document.getElementById("result").innerHTML =
        `<img src="${url}" width="350">
         <br>
         <a href="${url}" download="vietqr.png">
            <button>T·∫£i ·∫£nh</button>
         </a>`;
}
</script>

</body>
</html>
